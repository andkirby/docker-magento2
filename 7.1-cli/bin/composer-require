#!/bin/bash

# Run composer require with a single command
# instead of two commands:
#   $ composer require --no-update PKG:1.0
# and
#   $ composer update PKG

set -o pipefail
set -o errexit
set -o nounset
#set -o xtrace

[[ "${DEBUG:-}" = "true" ]] && COMPOSER_DEBUG=-vvv && set -o xtrace

sudo -u www-data -- /usr/bin/composer ${COMPOSER_DEBUG:-} \
  require --no-update ${@}

sudo -u www-data -- /usr/bin/composer ${COMPOSER_DEBUG:-}\
  update $(echo ${@} | grep -Eo '(([A-Za-z0-9_]|-)+/([A-Za-z0-9_]|-)+)')
